<mxfile host="app.diagrams.net" modified="2025-01-27T00:00:00Z" agent="Claude AI Assistant" version="24.7.17" etag="db-schema-1">
  <diagram id="databaseSchema" name="Database Schema (ERD)">
    <mxGraphModel dx="1800" dy="1200" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="2000" pageHeight="1400" math="0" shadow="0">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>

        <!-- Title -->
        <mxCell id="title" value="CortexAI Database Schema (Entity Relationship Diagram)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="700" y="40" width="600" height="40" as="geometry"/>
        </mxCell>

        <!-- Azure SQL Database Section -->
        <mxCell id="sqlSection" value="Azure SQL Database (PII/PHI Data)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=18;fontStyle=1;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="100" y="120" width="800" height="500" as="geometry"/>
        </mxCell>

        <!-- Users Table -->
        <mxCell id="usersTable" value="users" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=14;fontStyle=1;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="150" y="180" width="250" height="200" as="geometry"/>
        </mxCell>

        <mxCell id="usersFields" value="ðŸ”‘ id: INTEGER (PK, AUTO_INCREMENT)&#xa;ðŸ“§ email: VARCHAR(255) (UNIQUE, NOT NULL)&#xa;ðŸ”’ hashed_password: VARCHAR(255) (NOT NULL)&#xa;ðŸ“… created_at: DATETIME (DEFAULT NOW)&#xa;ðŸ“… updated_at: DATETIME (ON UPDATE)&#xa;ðŸ‘¤ first_name: VARCHAR(100)&#xa;ðŸ‘¤ last_name: VARCHAR(100)&#xa;ðŸ“± phone_number: VARCHAR(20)&#xa;ðŸŽ‚ date_of_birth: DATE&#xa;âš•ï¸ consent_given: BOOLEAN (DEFAULT FALSE)&#xa;âš•ï¸ consent_date: DATETIME&#xa;ðŸŒ timezone: VARCHAR(50)&#xa;ðŸ¥ healthcare_provider_id: VARCHAR(100)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="160" y="210" width="230" height="160" as="geometry"/>
        </mxCell>

        <!-- Sessions Table -->
        <mxCell id="sessionsTable" value="sessions" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=14;fontStyle=1;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="500" y="180" width="280" height="200" as="geometry"/>
        </mxCell>

        <mxCell id="sessionsFields" value="ðŸ”‘ id: INTEGER (PK, AUTO_INCREMENT)&#xa;ðŸ‘¤ user_id: INTEGER (FK â†’ users.id, NOT NULL)&#xa;ðŸ˜Š mood: VARCHAR(50)&#xa;ðŸ“… started_at: DATETIME (DEFAULT NOW)&#xa;ðŸ“… ended_at: DATETIME&#xa;â±ï¸ duration_seconds: INTEGER (DEFAULT 0)&#xa;ðŸŽ¯ session_type: VARCHAR(50)&#xa;ðŸ“ notes: TEXT&#xa;â­ rating: INTEGER (1-5)&#xa;âœ… completed: BOOLEAN (DEFAULT FALSE)&#xa;ðŸ·ï¸ tags: JSON&#xa;ðŸ“Š metrics: JSON" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="510" y="210" width="260" height="160" as="geometry"/>
        </mxCell>

        <!-- User Profiles Table -->
        <mxCell id="profilesTable" value="user_profiles" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=14;fontStyle=1;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="150" y="420" width="250" height="160" as="geometry"/>
        </mxCell>

        <mxCell id="profilesFields" value="ðŸ”‘ id: INTEGER (PK, AUTO_INCREMENT)&#xa;ðŸ‘¤ user_id: INTEGER (FK â†’ users.id, UNIQUE)&#xa;ðŸŽ¯ goals: JSON&#xa;âš•ï¸ conditions: JSON&#xa;ðŸ’Š medications: JSON&#xa;ðŸš¨ emergency_contact: VARCHAR(255)&#xa;ðŸ‘¨â€âš•ï¸ therapist_id: VARCHAR(100)&#xa;ðŸ“Š assessment_data: JSON&#xa;ðŸ”’ privacy_settings: JSON" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="160" y="450" width="230" height="120" as="geometry"/>
        </mxCell>

        <!-- Session Activities Table -->
        <mxCell id="activitiesTable" value="session_activities" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=14;fontStyle=1;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="500" y="420" width="280" height="160" as="geometry"/>
        </mxCell>

        <mxCell id="activitiesFields" value="ðŸ”‘ id: INTEGER (PK, AUTO_INCREMENT)&#xa;ðŸ“‹ session_id: INTEGER (FK â†’ sessions.id)&#xa;ðŸŽ¯ activity_type: VARCHAR(100) (NOT NULL)&#xa;ðŸ“ activity_data: JSON&#xa;ðŸ“… started_at: DATETIME (DEFAULT NOW)&#xa;ðŸ“… completed_at: DATETIME&#xa;â±ï¸ duration_seconds: INTEGER&#xa;ðŸ“Š outcome_score: DECIMAL(3,2)&#xa;ðŸ’­ user_feedback: TEXT&#xa;ðŸ¤– ai_analysis: JSON" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="510" y="450" width="260" height="120" as="geometry"/>
        </mxCell>

        <!-- Cosmos DB Section -->
        <mxCell id="cosmosSection" value="Cosmos DB (Pseudonymous Analytics Data)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=18;fontStyle=1;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="1000" y="120" width="800" height="500" as="geometry"/>
        </mxCell>

        <!-- Telemetry Events Collection -->
        <mxCell id="telemetryCollection" value="telemetry_events" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=14;fontStyle=1;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="1050" y="180" width="300" height="180" as="geometry"/>
        </mxCell>

        <mxCell id="telemetryFields" value="ðŸ”‘ id: STRING (Partition Key)&#xa;ðŸ“… timestamp: DATETIME&#xa;ðŸ”— session_id: STRING (pseudonymous)&#xa;ðŸ‘¤ user_id_hash: STRING (pseudonymous)&#xa;ðŸ“± event_type: STRING&#xa;ðŸ“Š event_data: OBJECT&#xa;ðŸŒ geo_region: STRING&#xa;ðŸ“± device_type: STRING&#xa;ðŸ”¢ app_version: STRING&#xa;âš¡ performance_metrics: OBJECT&#xa;ðŸš¨ error_data: OBJECT&#xa;ðŸ·ï¸ tags: ARRAY" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="1060" y="210" width="280" height="140" as="geometry"/>
        </mxCell>

        <!-- Analytics Aggregates Collection -->
        <mxCell id="analyticsCollection" value="analytics_aggregates" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=14;fontStyle=1;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="1400" y="180" width="300" height="180" as="geometry"/>
        </mxCell>

        <mxCell id="analyticsFields" value="ðŸ”‘ id: STRING (Partition Key)&#xa;ðŸ“… date: DATE&#xa;ðŸ“Š metric_type: STRING&#xa;ðŸ”¢ metric_value: DECIMAL&#xa;ðŸ“ˆ aggregation_level: STRING&#xa;ðŸŒ region: STRING&#xa;ðŸ‘¥ user_cohort: STRING&#xa;ðŸ“± platform: STRING&#xa;â° time_bucket: STRING&#xa;ðŸ“Š additional_dimensions: OBJECT" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="1410" y="210" width="280" height="140" as="geometry"/>
        </mxCell>

        <!-- Configuration Collection -->
        <mxCell id="configCollection" value="configuration" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=14;fontStyle=1;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="1050" y="400" width="300" height="140" as="geometry"/>
        </mxCell>

        <mxCell id="configFields" value="ðŸ”‘ id: STRING (Partition Key)&#xa;ðŸ·ï¸ config_type: STRING&#xa;ðŸ”§ config_data: OBJECT&#xa;ðŸ“… created_at: DATETIME&#xa;ðŸ“… updated_at: DATETIME&#xa;âœ… active: BOOLEAN&#xa;ðŸ”¢ version: INTEGER" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="1060" y="430" width="280" height="100" as="geometry"/>
        </mxCell>

        <!-- Feature Flags Collection -->
        <mxCell id="featureFlagsCollection" value="feature_flags" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=14;fontStyle=1;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="1400" y="400" width="300" height="140" as="geometry"/>
        </mxCell>

        <mxCell id="featureFlagsFields" value="ðŸ”‘ flag_name: STRING (Partition Key)&#xa;âœ… enabled: BOOLEAN&#xa;ðŸ‘¥ target_users: ARRAY&#xa;ðŸŒ target_regions: ARRAY&#xa;ðŸ“… start_date: DATETIME&#xa;ðŸ“… end_date: DATETIME&#xa;ðŸ“Š rollout_percentage: INTEGER" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="1410" y="430" width="280" height="100" as="geometry"/>
        </mxCell>

        <!-- Blob Storage Section -->
        <mxCell id="blobSection" value="Azure Blob Storage (File Data)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=18;fontStyle=1;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="100" y="700" width="600" height="200" as="geometry"/>
        </mxCell>

        <!-- Audio Container -->
        <mxCell id="audioContainer" value="audio-artifacts&#xa;Container&#xa;&#xa;â€¢ Voice recordings&#xa;â€¢ Audio analysis results&#xa;â€¢ Temporary audio files&#xa;â€¢ Processing metadata" style="shape=cylinder;whiteSpace=wrap;html=1;boundedLbl=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="150" y="760" width="160" height="120" as="geometry"/>
        </mxCell>

        <!-- User Data Container -->
        <mxCell id="userDataContainer" value="user-data&#xa;Container&#xa;&#xa;â€¢ Profile images&#xa;â€¢ Document uploads&#xa;â€¢ Export files&#xa;â€¢ Backup data" style="shape=cylinder;whiteSpace=wrap;html=1;boundedLbl=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="350" y="760" width="160" height="120" as="geometry"/>
        </mxCell>

        <!-- System Data Container -->
        <mxCell id="systemContainer" value="system-data&#xa;Container&#xa;&#xa;â€¢ Application logs&#xa;â€¢ Error reports&#xa;â€¢ Performance data&#xa;â€¢ Diagnostic files" style="shape=cylinder;whiteSpace=wrap;html=1;boundedLbl=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="550" y="760" width="160" height="120" as="geometry"/>
        </mxCell>

        <!-- Key Vault Section -->
        <mxCell id="keyVaultSection" value="Azure Key Vault (Secrets & Keys)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=18;fontStyle=1;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="800" y="700" width="400" height="200" as="geometry"/>
        </mxCell>

        <mxCell id="secretsVault" value="Secrets Vault&#xa;&#xa;ðŸ” Database connection strings&#xa;ðŸ”‘ API keys (OpenAI, Speech)&#xa;ðŸ”’ JWT signing keys&#xa;ðŸ“œ SSL certificates&#xa;ðŸ” Encryption keys&#xa;ðŸ”‘ Service principal credentials" style="shape=hexagon;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=12;" vertex="1" parent="1">
          <mxGeometry x="830" y="760" width="340" height="120" as="geometry"/>
        </mxCell>

        <!-- Future Extensions Section -->
        <mxCell id="futureSection" value="Future Schema Extensions" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0f0f0;strokeColor=#999999;fontSize=18;fontStyle=1;verticalAlign=top;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="1000" y="700" width="800" height="200" as="geometry"/>
        </mxCell>

        <!-- Future Tables -->
        <mxCell id="therapistsTable" value="therapists&#xa;&#xa;ðŸ”‘ id, name, credentials&#xa;ðŸ“§ email, phone&#xa;ðŸ¥ organization&#xa;ðŸ‘¥ assigned_users[]" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0f0f0;strokeColor=#999999;fontSize=12;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="1050" y="760" width="140" height="120" as="geometry"/>
        </mxCell>

        <mxCell id="assessmentsTable" value="assessments&#xa;&#xa;ðŸ”‘ id, user_id&#xa;ðŸ“‹ assessment_type&#xa;ðŸ“Š responses (JSON)&#xa;ðŸ“ˆ scores, results" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0f0f0;strokeColor=#999999;fontSize=12;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="1220" y="760" width="140" height="120" as="geometry"/>
        </mxCell>

        <mxCell id="notificationsTable" value="notifications&#xa;&#xa;ðŸ”‘ id, user_id&#xa;ðŸ“± message, type&#xa;ðŸ“… scheduled_at&#xa;âœ… delivered_at" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0f0f0;strokeColor=#999999;fontSize=12;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="1390" y="760" width="140" height="120" as="geometry"/>
        </mxCell>

        <mxCell id="goalsTable" value="user_goals&#xa;&#xa;ðŸ”‘ id, user_id&#xa;ðŸŽ¯ goal_type, target&#xa;ðŸ“Š progress&#xa;ðŸ“… deadline" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0f0f0;strokeColor=#999999;fontSize=12;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="1560" y="760" width="140" height="120" as="geometry"/>
        </mxCell>

        <!-- Relationships -->
        <!-- Users to Sessions (One-to-Many) -->
        <mxCell id="userSessionRel" style="endArrow=ERmany;startArrow=ERone;html=1;strokeColor=#333333;strokeWidth=2;entryX=0;entryY=0.5;exitX=1;exitY=0.5;" edge="1" parent="1" source="usersTable" target="sessionsTable">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="userSessionLabel" value="1:N&#xa;One user has many sessions" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontStyle=2;" vertex="1" parent="1">
          <mxGeometry x="420" y="260" width="60" height="40" as="geometry"/>
        </mxCell>

        <!-- Users to Profiles (One-to-One) -->
        <mxCell id="userProfileRel" style="endArrow=ERone;startArrow=ERone;html=1;strokeColor=#333333;strokeWidth=2;entryX=0.5;entryY=0;exitX=0.5;exitY=1;" edge="1" parent="1" source="usersTable" target="profilesTable">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="userProfileLabel" value="1:1&#xa;One user has one profile" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontStyle=2;" vertex="1" parent="1">
          <mxGeometry x="200" y="390" width="60" height="40" as="geometry"/>
        </mxCell>

        <!-- Sessions to Activities (One-to-Many) -->
        <mxCell id="sessionActivityRel" style="endArrow=ERmany;startArrow=ERone;html=1;strokeColor=#333333;strokeWidth=2;entryX=0.5;entryY=0;exitX=0.5;exitY=1;" edge="1" parent="1" source="sessionsTable" target="activitiesTable">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="sessionActivityLabel" value="1:N&#xa;One session has many activities" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontStyle=2;" vertex="1" parent="1">
          <mxGeometry x="680" y="390" width="60" height="40" as="geometry"/>
        </mxCell>

        <!-- Data Classification Legend -->
        <mxCell id="legend" value="Data Classification Legend" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontSize=16;fontStyle=1;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="100" y="950" width="400" height="180" as="geometry"/>
        </mxCell>

        <mxCell id="piiLegend" value="ðŸ”´ PII (Personally Identifiable Information)&#xa;â€¢ Names, email, phone, date of birth&#xa;â€¢ Stored in Azure SQL with encryption&#xa;â€¢ Subject to GDPR/CCPA regulations" style="text;html=1;strokeColor=none;fillColor=#ffe0e0;align=left;verticalAlign=top;whiteSpace=wrap;rounded=1;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="120" y="980" width="160" height="80" as="geometry"/>
        </mxCell>

        <mxCell id="phiLegend" value="ðŸŸ¡ PHI (Protected Health Information)&#xa;â€¢ Medical conditions, medications&#xa;â€¢ Therapy notes, assessments&#xa;â€¢ HIPAA compliance required" style="text;html=1;strokeColor=none;fillColor=#ffe8cc;align=left;verticalAlign=top;whiteSpace=wrap;rounded=1;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="300" y="980" width="160" height="80" as="geometry"/>
        </mxCell>

        <mxCell id="pseudoLegend" value="ðŸ”µ Pseudonymous Data&#xa;â€¢ Hashed user identifiers&#xa;â€¢ Aggregated analytics&#xa;â€¢ No direct PII linkage" style="text;html=1;strokeColor=none;fillColor=#e0f0ff;align=left;verticalAlign=top;whiteSpace=wrap;rounded=1;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="120" y="1070" width="160" height="60" as="geometry"/>
        </mxCell>

        <mxCell id="publicLegend" value="ðŸŸ¢ Public/System Data&#xa;â€¢ Configuration settings&#xa;â€¢ Feature flags&#xa;â€¢ System metadata" style="text;html=1;strokeColor=none;fillColor=#e0ffe0;align=left;verticalAlign=top;whiteSpace=wrap;rounded=1;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="300" y="1070" width="160" height="60" as="geometry"/>
        </mxCell>

        <!-- Indexing Strategy -->
        <mxCell id="indexStrategy" value="Indexing Strategy" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=16;fontStyle=1;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="600" y="950" width="300" height="180" as="geometry"/>
        </mxCell>

        <mxCell id="indexDetails" value="Primary Indexes:&#xa;â€¢ users.email (UNIQUE)&#xa;â€¢ sessions.user_id + started_at&#xa;â€¢ activities.session_id + started_at&#xa;&#xa;Cosmos DB Partition Keys:&#xa;â€¢ telemetry_events: user_id_hash&#xa;â€¢ analytics_aggregates: date + region&#xa;â€¢ configuration: config_type&#xa;&#xa;Performance Considerations:&#xa;â€¢ Composite indexes for queries&#xa;â€¢ TTL on temporary data&#xa;â€¢ Read replicas for analytics" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="620" y="980" width="260" height="140" as="geometry"/>
        </mxCell>

        <!-- Data Retention -->
        <mxCell id="retentionPolicy" value="Data Retention Policies" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=16;fontStyle=1;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="1000" y="950" width="300" height="180" as="geometry"/>
        </mxCell>

        <mxCell id="retentionDetails" value="Retention Periods:&#xa;â€¢ Audio files: 30 days (auto-delete)&#xa;â€¢ Session data: 7 years (compliance)&#xa;â€¢ Telemetry: 2 years (analytics)&#xa;â€¢ Logs: 90 days (security)&#xa;&#xa;Compliance Features:&#xa;â€¢ Right to erasure (GDPR Article 17)&#xa;â€¢ Data portability (GDPR Article 20)&#xa;â€¢ Cascading deletes&#xa;â€¢ Audit trail preservation&#xa;&#xa;Backup Strategy:&#xa;â€¢ Daily automated backups&#xa;â€¢ Point-in-time recovery&#xa;â€¢ Geo-redundant storage" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1020" y="980" width="260" height="140" as="geometry"/>
        </mxCell>

        <!-- Security Features -->
        <mxCell id="securityFeatures" value="Security Features" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=16;fontStyle=1;verticalAlign=top;" vertex="1" parent="1">
          <mxGeometry x="1400" y="950" width="300" height="180" as="geometry"/>
        </mxCell>

        <mxCell id="securityDetails" value="Encryption:&#xa;â€¢ AES-256 encryption at rest&#xa;â€¢ TLS 1.2+ in transit&#xa;â€¢ Column-level encryption (PII/PHI)&#xa;&#xa;Access Control:&#xa;â€¢ Row-level security (RLS)&#xa;â€¢ Role-based access control&#xa;â€¢ Just-in-time access&#xa;â€¢ API key rotation&#xa;&#xa;Monitoring:&#xa;â€¢ Failed login detection&#xa;â€¢ Anomaly detection&#xa;â€¢ Data access auditing&#xa;â€¢ Real-time alerts" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=top;whiteSpace=wrap;rounded=0;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1420" y="980" width="260" height="140" as="geometry"/>
        </mxCell>

        <!-- Database Connections -->
        <mxCell id="sqlConn" style="endArrow=block;html=1;strokeColor=#d6b656;strokeWidth=3;dashed=1;" edge="1" parent="1" source="mainAPI" target="azureSQL">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="cosmosConn" style="endArrow=block;html=1;strokeColor=#b85450;strokeWidth=3;dashed=1;" edge="1" parent="1" source="mainAPI" target="telemetryCollection">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="blobConn" style="endArrow=block;html=1;strokeColor=#9673a6;strokeWidth=3;dashed=1;" edge="1" parent="1" source="mainAPI" target="audioContainer">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>